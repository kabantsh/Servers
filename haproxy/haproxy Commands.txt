
1๏ธโฃ ุชููู HAProxy ุจุชูุฒูุน ุทูุจุงุช ุงูุดุจูุฉ ุงููุงุฑุฏุฉ ุนุจุฑ ุฎูุงุฏู ุฎูููุฉ (#Backend #Servers) ูุชุนุฏุฏุฉ:
backend appserver
2๏ธโฃ ุชุฎุชุงุฑ ุงูุฎูุงุฑุฒููุฉ ุงูุจุชุดุชุบู ุจููุง ุงูุฃุฏุงุฉ :
balance roundrobin
3๏ธโฃ ุชูุชุจ ุนูุงููู ุงูุณูุฑูุฑุงุช (#Server #ip) ู ุชูุชุจ ุฑูู ุงููููุฐ ุงูุญูุดุชุบู ุจูู ( #number #Network #port) :
server app1 app1.automateordie.com:80 check
server app2 app2.automateordie.com:80 check
ู ุทุจุนุง ูููุฉ check ุฏู ุจุชุฎูู ุงูุฃุฏุงุฉ ุชุชุฃูุฏ ูู ุฑูู ุงููููุฐ ูู ููุชูุญ ููุง ูุง ูุจู ูุง ุชุถููู ู ุจู ูุฏุฉ ุจุชููุฑ ููุชโฑ๏ธ ููุฌููุฏ  ๐ช๐พุจุฏู ูุง ุชูุฒุน ุนููู ุงูุฃุญูุงู ูุจุงุดุฑุฉ ๐ .

4๏ธโฃ ุทุจุนุง ุงูุฃุฏุงุฉ ุจุชุดุชุบู ูู ุงููุณุชูู ุงูุฑุงุจุน ูู ุงู#OSI (#L4 #Network_Layer) ู ุฃูุถุง ูููู ุชุดุชุบู ูู ุงููุณุชูู ุงูุณุงุจุน (#L7 #Application_Layer) ูู ุนุงูุฒูุง ุชุดุชุบู ุนูู ุงููุณุชูู ุงูุณุงุจุน ุญุชูุชุจ ุงูุณุทุฑ ุฏุง ูู ููู ุงูุฅุนุฏุงุฏุงุช ุฃู ุงูุชูููู.
 mode http



ููู ุชูููู HAProxy ูู ููู ูุตู ููุนุจ ุฏูุฑูุง ููููุง ูู ุชุญุฏูุฏ ุณููู ุจุฑูุงูุฌ HAProxy. ููู ูุญุฏุฏ ุงูููุงุนุฏ ุงูุชู ูุณุชุฎุฏููุง HAProxy ูุชูุฒูุน ุทูุจุงุช ุงูุดุจูุฉ ุงููุงุฑุฏุฉ ุนูู ุฎูุงุฏู ุฎูููุฉ ูุชุนุฏุฏุฉ. ููุตู ุจุฅูุดุงุก ููู ุชูููู ูุถุจูุท ุจุนูุงูุฉ ูุถูุงู ุชูุฌูู ุญุฑูุฉ ูุฑูุฑ ุงูุดุจูุฉ ุจููุงุกุฉ ูุชุญููู ุงูุฃุฏุงุก ุงูุฃูุซู ููุชุทุจููุงุช. ูููุง ููู ุดุฑุญ ูุฃูุณุงู ููู ุชูููู HAProxy:

ุทุจุนุง ุฅุนุฏุงุฏุงุช HAProxy ููุฌูุฏุฉ ูู ุงูููู ุฃุฏูุงู
~# vim /etc/haproxy/haproxy.cfg
ู ุฏู ุฃูุณุงู ููู ุงูุฅุนุฏุงุฏุงุช ุฃู ุงูุชูููู ููุฃุฏุงุฉ

1. Global Section (ุงููุณู ุงูุนุงู):

 ูุญุฏุฏ ูุฐุง ุงููุณู ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ ุงูุชู ุชูุทุจู ุนูู HAProxy ุจุฃูููู. ููููู ุงุนุชุจุงุฑ ูุฐู ุงูุฅุนุฏุงุฏุงุช ุจูุซุงุจุฉ ุงูููู ุงูุงูุชุฑุงุถูุฉ ุงูุชู ูุชู ุชุทุจูููุง ูุง ูู ูุชู ุชุฌุงูุฒูุง ูู ุฃูุณุงู ุฃุฎุฑู ูู ุงูููู. ููู ุงูุฃูุซูุฉ ุนูู ุงูุฅุนุฏุงุฏุงุช ุงูุชู ูุชู ุชุนุฑูููุง ุนุงุฏุฉู ูู ูุฐุง ุงููุณู ุฑูู ูููุฐ ุงูุชุดุบูู ุงูุฐู ูุณุชูุน ุนููู HAProxy ูุทูุจุงุช ุงูุดุจูุฉุ ููุนุฑู ุงููุณุชุฎุฏู ูุงููุฌููุนุฉ ุงูุชู ูุนูู ุชุญุชูุง HAProxyุ ูุฎูุงุฑุงุช ุชุณุฌูู ุงูุฏุฎูู.

2. Defaults Section (ูุณู ุงูุงูุชุฑุงุถุงุช):

 ูููุฑ ูุฐุง ุงููุณู ูุฌููุนุฉ ูู ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ุงูุชู ุชูุทุจู ุนูู ุฌููุน ุงูุฎูุงุฏู ุงูุฎูููุฉ ุงูุชู ูุชู ุชุนุฑูููุง ูุงุญููุง ูู ููู ุงูุชูููู. ููููู ุชุฌุงูุฒ ุฃู ูู ูุฐู ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ุนูู ุฃุณุงุณ ูู ุฎุงุฏู ุฎููู ูู ุฃูุณุงู ุงูุฎูุงุฏู ุงูุฎูููุฉ ุงููุฎุตุตุฉ. ุนูู ุณุจูู ุงููุซุงูุ ูููู ุชุญุฏูุฏ ุฎูุงุฑ ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุงูุชุฑุงุถู ููุฎูุงุฏู ุงูุฎูููุฉ ูู ูุฐุง ุงููุณู.

3. Listeners (ุจุฑุงุกุงุช ุงูุงุณุชูุงุน):

* ุชูุซู ุจุฑุงุกุงุช ุงูุงุณุชูุงุน ููุงุท ุงูุฏุฎูู ุงูุชู ูุณุชุฎุฏููุง HAProxy ูุชููู ุทูุจุงุช ุงูุดุจูุฉ ุงููุงุฑุฏุฉ. ูุชู ุชุนุฑูู ูู ุจุฑุงููุฒ ุงูุงุณุชูุงุน ูู ูุณู ูููุตู ูุญุฏุฏ ุงููููุฐ ุงูุฐู ูุณุชูุน ุนููู HAProxyุ ูุงูุงุณู ุงูุฐู ูููู ุงุณุชุฎุฏุงูู ููุฅุดุงุฑุฉ ุฅูู ุงูุจุฑูุงุฒ ูุงุญููุง ุนูุฏ ุชุนุฑูู ุงูุฎูุงุฏู ุงูุฎูููุฉ. ูููู ููุจุฑูุงุฒ ุงููุงุญุฏ ุฃู ูุฑุชุจุท ุจุนุฏุฏ ูู ุงูุฎูุงุฏู ุงูุฎูููุฉุ ุญูุซ ูุญุฏุฏ HAProxy ุฎุงุฏููุง ุฎูููุงู ููุงุณุจูุง ูุชูุฌูู ูู ุทูุจ ูุงุฑุฏ ููููุง ูููุงุนุฏ ุงูุชูุฌูู ุงููุญุฏุฏุฉ.

4. Backends (ุงูุฎุฏูุงุช ุงูุฎูููุฉ):

* ุชูุซู ุงูุฎูุงุฏู ุงูุฎูููุฉ ุงูุฎูุงุฏู ุงูุญููููุฉ ุงูุชู ูุณุชูุฏููุง HAProxy ุนูุฏ ุชููู ุทูุจ ุดุจูุฉ. ูุชู ุชุนุฑูู ูู ุฎุงุฏู ุฎููู ูู ูุณู ูููุตู ูุญุฏุฏ ุงุณู ุงูุฎุงุฏูุ ูุงููููุน (ุนููุงู IP ุฃู ุงุณู ุงููุถูู) ูุงููููุฐ ุงูุฐู ูุณุชุฎุฏู ููุงุชุตุงู ุจุงูุฎุงุฏู ุงูุฎููู. ุจุงูุฅุถุงูุฉ ุฅูู ุฐููุ ูููู ููุฐุง ุงููุณู ุฃูุถูุง ุชุญุฏูุฏ ุฎูุงุฑุฒููุฉ ุงูุชูุฌูู ุงูุชู ูุณุชุฎุฏููุง HAProxy ูุชุญุฏูุฏ ุงูุฎุงุฏู ุงูุฎููู ุงูููุงุณุจ ููู ุทูุจุ ููุฐูู ุฎูุงุฑุงุช ุงูุตุญุฉ ุงูุชู ูุณุชุฎุฏููุง HAProxy ููุฑุงูุจุฉ ุญุงูุฉ ุงูุฎูุงุฏู ุงูุฎูููุฉ.

5. ACL (ููุงุฆู ุงูุชุญูู ุจุงููุตูู):

* ุชุชูุญ ููุงุฆู ุงูุชุญูู ุจุงููุตูู (ACLs) ุฅูุดุงุก ููุงุนุฏ ุชุญูู ููุทููุฉ ูููู ุงุณุชุฎุฏุงููุง ูุชูููุฏ ุงููุตูู ุฅูู ุฎุฏูุงุช ูุนููุฉ. ุนูู ุณุจูู ุงููุซุงูุ ูููู ุฅูุดุงุก ูุงุฆูุฉ ACL ูุชุญุฏูุฏ ุนูุงููู IP ุฃู ุฃุณูุงุก ุงููุถูููู ุงููุณููุญ ููุง ุจุงููุตูู ุฅูู ุฎุฏูุฉ ูุนููุฉุ ุฃู ูุชูููุฏ ุงููุตูู ุจูุงุกู ุนูู ููุช ุงูููู ุฃู ุฃู ูุนูุงุฑ ุขุฎุฑ.

6. Errors (ุงูุฃุฎุทุงุก):

 ูุชูุญ ูุณู ุงูุฃุฎุทุงุก ุชุฎุตูุต ุทุฑููุฉ ูุนุงูุฌุฉ ุทูุจุงุช ุงูุดุจูุฉ ุงูุชู ุชูุดู ุจุณุจุจ ูุดููุงุช ูู ุงูุชูุฌูู ุฃู ุงุชุตุงู ุงูุฎุงุฏู ุงูุฎููู. ููููู ููุฐุง ุงููุดู ุชุญุฏูุฏ ุตูุญุงุช ุงูุฎุทุฃ ุงููุฎุตุตุฉ ุงูุชู ุณูุชู ุนุฑุถูุง ูููุณุชุฎุฏููู ูู ุญุงูุฉ ุญุฏูุซ ุฃุฎุทุงุกุ ุจุงูุฅุถุงูุฉ ุฅูู ุชุญุฏูุฏ ูุณุชูู ุชูุงุตูู ุฑุณุงุฆู ุชุณุฌูู ุงูุฏุฎูู ุงูุชู ูุชู ุฅูุดุงุคูุง ููุดููุงุช ุงูุชูุฌูู.






ุทุจุนุง ุงู HAProxy ุนุจุงุฑุฉ ุนู ุฎุฏูุฉ ุนุงุฏูุฉ 
(System Service or deamon)
ุนุดุงู ุชุชุนุงูู ูุนุงูุง ุจุชุณุชุฎุฏู ุงูุฃูุฑ 
service 
ุฃู
systemctl 
ุญุณุจ ูุธุงู ุงูุชุดุบูู ุญูู

ุฏู ุงูุฃูุงูุฑ ุงููููุฉ ูู ุดุบุงู ุจู ุฃุฏุงุฉ ุงู systemctl


1. ุชุดุบูู HAProxy (start):
~# systemctl start  haproxy.service


2. ููู ุชุดุบูู HAProxy (stop):

~# systemctl stop  haproxy.service


3. ุฅุนุงุฏุฉ ุชุดุบูู HAProxy (restart):
~# systemctl restart  haproxy.service

4. ูุนุฑูุฉ ุญุงูุฉ ุงูุชุดุบูู (status):

~# systemctl status  haproxy.service

5. ุฅุนุงุฏุฉ ุชุญููู ููู ุงูุชูููู  (reload configuration file):

~# systemctl reload  haproxy.service






ู ุนุดุงู ุชุดูู ูุชูุจ ุงูุชุนูููุงุช ูู ุงูุฃุฏุงุฉ ูููู ุชุดูู ุงูููู ุฏุง

/usr/share/doc/haproxy/configuration.txt.gz

 |+~~~~~~~~~~~~~~~+
 || Best regrets  |
 || Mohamed Ayman |
 || kabantsh      |
 |+~~~~~~~~~~~~~~~+
 |
 |
 |
